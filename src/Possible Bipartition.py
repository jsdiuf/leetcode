"""
@version: python3.5
@author: jsdiuf
@contact: weichun713@foxmail.com
@time: 2018-8-12 12:59
"""
import time


class Solution:
    def possibleBipartition(self, N, dislikes):
        """
        :type N: int
        :type dislikes: List[List[int]]
        :rtype: bool
        """
        if not dislikes:
            return True
        dic = {}
        for item in dislikes:
            if item[0] not in dic:
                dic[item[0]] = {item[1]: 0}
            else:
                dic[item[0]][item[1]] = 0

        # 找到环形  且节点数为奇数个
        def DFS(targetmap, key, length, l):
            if key in dic:
                for e in dic[key]:
                    if e in targetmap:
                        if length % 2 == 1:
                            l.append(False)
                            return
                    DFS(targetmap, e, length + 1, l)
        for i in range(N):
            if i + 1 not in dic:
                continue
            l=[]
            DFS(dic[i + 1], i + 1, 0,l)
            if len(l)>0:
                return False
        return True


s = Solution()
print(time.time())
print(s.possibleBipartition(200, [[171,176],[10,95],[172,187],[173,195],[125,126],[42,83],[9,183],[153,160],[34,153],[82,166],[65,182],[92,135],[129,139],[118,160],[149,184],[117,185],[163,194],[15,197],[121,190],[69,89],[137,194],[116,177],[31,80],[127,182],[122,137],[67,181],[42,88],[61,151],[187,190],[87,146],[129,190],[11,103],[137,142],[138,186],[12,69],[46,142],[94,132],[192,200],[112,141],[172,200],[160,181],[196,198],[139,197],[181,182],[161,176],[151,189],[17,158],[18,36],[133,142],[4,87],[23,128],[94,176],[51,103],[144,174],[8,155],[77,164],[176,199],[120,161],[43,174],[107,190],[16,196],[79,199],[178,182],[140,144],[159,195],[177,187],[100,129],[79,145],[152,179],[198,199],[112,132],[20,21],[83,184],[120,191],[151,186],[20,132],[92,179],[23,153],[85,142],[31,199],[152,176],[144,165],[24,28],[23,200],[155,172],[129,184],[165,198],[189,199],[191,194],[11,149],[3,112],[124,167],[66,78],[37,99],[138,191],[73,74],[27,186],[124,157],[25,37],[29,148],[86,111],[35,85],[50,103],[192,198],[193,200],[11,65],[172,190],[84,168],[65,160],[142,165],[62,158],[70,159],[107,117],[128,155],[151,169],[64,128],[39,191],[54,125],[105,152],[108,131],[164,189],[183,190],[163,172],[159,197],[68,87],[124,148],[58,68],[168,199],[86,102],[171,178],[29,91],[170,177],[71,105],[147,178],[183,197],[152,167],[11,92],[58,188],[124,141],[140,194],[49,58],[117,135],[90,191],[71,143],[28,34],[31,73],[150,175],[137,170],[156,194],[166,194],[120,141],[78,96],[75,174],[37,156],[133,183],[195,196],[81,163],[169,192],[40,145],[103,138],[194,200],[146,187],[125,166],[56,98],[3,149],[161,197],[85,191],[118,135],[71,124],[20,34],[103,151],[23,164],[148,154],[190,193],[106,126],[78,95],[122,180],[174,185],[123,185],[160,173],[38,57],[116,171],[150,192],[149,169],[161,168],[177,195],[154,164],[80,148],[82,168],[117,147],[170,191],[44,79],[42,107],[191,199],[76,140],[115,155],[112,160],[194,195],[68,99],[137,159],[142,148],[148,187],[50,106],[74,81],[45,63],[75,126],[146,197],[197,199],[77,197],[185,186],[26,72],[103,106],[112,114],[122,153],[48,122],[37,164],[103,109],[136,141],[1,108],[37,105],[53,193],[28,124],[85,125],[181,200],[101,179],[146,150],[146,147],[148,178],[5,129],[105,127],[141,160],[96,97],[59,87],[124,159],[52,172],[122,123],[62,149],[178,185],[40,170],[71,114],[147,175],[176,187],[30,42],[45,114],[80,122],[141,192],[42,187],[67,132],[91,131],[3,79],[24,200],[179,188],[26,145],[59,151],[144,158],[180,191],[163,193],[121,185],[14,88],[187,199],[139,161],[65,73],[19,86],[140,170],[122,141],[109,128],[187,189],[165,190],[120,136],[46,191],[188,190],[15,130],[77,131],[152,189],[121,133],[11,98],[85,195],[103,164],[23,28],[2,54],[45,87],[41,113],[167,170],[193,199],[61,110],[146,190],[147,180],[29,133],[103,130],[36,64],[68,156],[31,40],[29,40],[171,197],[32,185],[74,112],[30,55],[148,157],[22,156],[15,199],[42,58],[128,200],[167,182],[111,188],[82,94],[101,165],[176,196],[168,170],[170,178],[140,191],[180,188],[195,198],[59,101],[56,181],[84,91],[171,173],[59,192],[61,103],[59,163],[65,84],[87,93],[75,156],[148,190],[68,155],[112,129],[132,153],[79,178],[106,160],[35,44],[34,37],[35,177],[122,178],[18,32],[93,167],[160,175],[157,169],[62,169],[149,183],[161,174],[66,102],[6,89],[73,139],[111,154],[57,116],[12,189],[144,184],[137,187],[93,120],[168,183],[87,124],[116,129],[26,61],[69,123],[112,162],[182,194],[65,137],[159,168],[192,195],[28,140],[40,165],[27,86],[119,153],[53,180],[160,192],[39,154],[181,187],[54,187],[54,162],[156,163],[6,62],[51,66],[179,185],[94,191],[113,122],[154,173],[46,119],[142,200],[123,150],[187,192],[158,175],[12,194],[56,69],[61,159],[69,88],[55,149],[34,99],[55,108],[36,125],[46,156],[94,178],[112,191],[73,194],[183,200],[120,159],[120,170],[148,170],[100,119],[128,144],[70,120],[110,163],[165,193],[6,49],[97,190],[86,167],[91,187],[69,176],[27,151],[178,197],[52,168],[179,200],[68,174],[28,117],[29,97],[44,63],[94,100],[183,186],[17,91],[138,162],[15,140],[85,193],[3,138],[80,93],[75,131],[193,197],[40,147],[30,170],[83,195],[183,193],[128,190],[55,166],[57,195],[44,137],[50,116],[27,90],[119,133],[98,119],[196,197],[16,184],[109,111],[149,194],[107,131],[20,107],[123,164],[108,147],[155,190],[10,198],[132,137],[33,127],[176,198],[71,161],[36,133],[140,185],[14,45],[195,200],[62,190],[57,91],[29,112],[49,141],[51,161],[78,151],[146,183],[188,197],[38,105],[128,181],[78,185],[186,195],[150,185],[118,189],[82,163],[117,140],[110,151],[39,197],[104,143],[130,155],[57,144],[85,143],[42,177],[144,164],[133,146],[177,193],[54,101],[2,151],[120,152],[170,187],[47,199],[78,196],[191,195],[90,125],[184,194],[115,136],[55,158],[173,184],[80,196],[70,192],[73,124],[86,110],[89,186],[171,186],[167,176],[118,197],[114,146],[172,189],[79,122],[160,194],[181,185],[184,200],[185,190],[130,156],[9,52],[69,171],[93,190],[40,54],[73,168],[189,192],[131,181],[45,134],[163,169],[132,182],[111,169],[1,6],[57,131],[67,68],[95,170],[183,191],[101,191],[191,200],[111,151],[136,151],[72,117],[30,98],[158,183],[162,170],[33,69],[87,142],[19,105],[44,182],[195,199],[67,112],[168,198],[128,131],[125,154],[167,169],[47,155],[173,194],[81,92],[128,185],[42,74],[131,148],[19,142],[153,167],[156,180],[53,165],[1,71],[23,172],[180,187],[110,139],[184,190],[169,174],[83,147],[116,163],[76,89],[18,196],[121,167],[113,194],[69,79],[102,183],[34,120],[181,199],[10,195],[195,197],[100,189],[137,141],[67,121],[71,192],[125,147],[85,86],[112,168],[12,84],[137,151],[183,195],[48,78],[143,165],[20,144],[196,199],[34,38],[44,161],[149,192],[37,43],[122,183],[166,191],[91,178],[119,189],[25,102],[104,138],[39,178],[31,88],[112,122],[81,172],[2,24],[62,103],[150,161],[17,82],[99,163],[93,129],[191,196],[90,96],[139,150],[168,180],[138,181],[44,100],[9,69],[69,124],[170,194],[133,194],[166,176],[128,183],[50,183],[91,149],[132,133],[148,168],[31,176],[51,91],[102,117],[35,181],[9,138],[141,156],[151,181],[22,28],[135,150],[179,180],[17,49],[152,157],[144,166],[117,180],[42,131],[43,194],[189,191],[64,77],[167,199],[107,182],[11,29],[141,199],[62,153],[129,193],[173,182],[63,92],[177,179],[9,78],[36,131],[72,108],[105,194],[178,187],[43,105],[108,185],[170,172],[19,165],[104,105],[123,199],[172,191],[173,199],[113,185],[39,74],[28,45],[116,185],[100,116],[141,149],[151,178],[130,154],[7,148],[16,43],[101,183],[106,132],[56,123],[14,146],[89,90],[40,94],[187,196],[126,165],[38,188],[149,166],[20,79],[89,124],[70,174],[125,190],[180,194],[52,200],[48,96],[68,80],[60,85],[80,90],[125,152],[48,115],[161,175],[183,196],[73,77],[115,178],[161,195],[198,200],[92,162],[48,73],[24,69],[142,173],[44,196],[131,188],[31,55],[98,185],[8,177],[163,199],[97,148],[88,194],[57,138],[30,65],[54,194],[8,151],[42,71],[150,172],[176,195],[138,140],[134,163],[107,186],[116,140],[181,197],[143,147],[10,118],[126,152],[128,156],[32,64],[19,179],[166,180],[82,91],[98,193],[43,125],[3,41],[153,174],[71,127],[7,138],[1,94],[102,112],[22,111],[140,200],[106,127],[151,190],[16,63],[176,180],[157,170],[64,82],[48,188],[33,115],[104,146],[63,153],[187,200],[102,172],[26,141],[105,147],[92,114],[55,126],[93,111],[146,153],[170,198],[125,170],[59,198],[110,198],[5,14],[62,113],[124,129],[152,182],[99,145],[199,200],[167,183],[109,193],[23,37],[128,175],[196,200],[197,198],[20,126],[67,158],[24,121],[16,175],[68,181],[22,124],[37,60],[81,155],[87,166],[51,158],[5,67],[104,153],[46,59],[106,165],[62,181],[149,155],[78,115],[79,99],[183,187],[83,100],[92,194],[66,194],[180,197],[46,66],[70,79],[166,169],[115,137],[55,176],[112,190],[176,188],[3,168],[160,198],[28,47],[11,41],[128,199],[19,141],[153,162],[10,182],[179,191],[157,188],[65,86],[144,159],[163,192],[150,177],[73,182],[178,196],[22,105],[98,150],[81,182],[131,198],[133,177],[161,166],[135,189],[145,150],[156,198],[56,73],[170,200],[25,144],[130,198],[111,121],[176,189],[7,177],[134,192],[91,106],[10,87],[176,179],[103,189],[38,49],[116,155],[33,54],[67,140],[38,110],[119,138],[156,176],[175,195],[63,174],[51,81],[47,49],[9,156],[79,86],[84,134],[2,101],[8,16],[175,176],[56,106],[19,94],[38,142],[140,162],[69,196],[87,165],[176,197],[110,126],[165,166],[168,171],[56,172],[178,184],[8,191],[169,197],[84,100],[26,48],[108,183],[4,139],[186,199],[124,132],[144,152],[39,122],[18,176],[47,48],[94,137],[186,194],[172,197],[79,189],[175,200],[94,147],[9,12],[70,132],[66,188],[86,187],[181,194],[41,50],[155,170],[165,175],[158,165],[98,130],[122,135],[51,129],[191,192],[19,106],[96,113],[115,193],[140,148],[92,106],[46,61],[177,190],[39,115],[80,96],[99,147],[111,195],[124,162],[62,89],[172,188],[2,196],[45,118],[94,154],[72,172],[43,169],[63,186],[189,193],[14,143],[77,83],[61,164],[187,195],[114,119],[7,36],[14,177],[70,199],[83,102],[89,127],[40,97],[136,150],[109,132],[52,129],[168,191],[13,27],[107,192],[91,113],[152,191],[177,183],[3,187],[119,123],[19,30]]))
print(time.time())